<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Stream</title>
</head>
<body>
    <img id="videoStream" src="" alt="Video Stream"/>

    <script>
        // 替换为你的WebSocket服务器地址
        let socket = new WebSocket('ws://10.1.40.6:3000');
    
        socket.binaryType = 'arraybuffer';

        socket.onopen = function() {
            console.log('WebSocket connection established');
			
        };

        socket.onmessage = function(event) {
			if (typeof event.data == 'string') {
                // 接收到信息头
                console.log('Received message:', event.data);
            }else{
				let imgElement = document.getElementById('videoStream');
				let blob = new Blob([event.data], {type: 'image/jpeg'});
				let url = URL.createObjectURL(blob);
				imgElement.src = url; // 显示图像流在img元素中
			}
        };

        socket.onclose = function() {
            console.log('WebSocket connection closed',event.reason);
        };
    </script>
</body>
</html>